{% extends 'base.html' %}

{% block title %}Kody QR do Wydruku{% endblock %}

{% block styles %}
<style>
    body { background-color: #fff; }
    .qr-page {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-gap: 20px;
        padding: 20px;
        page-break-after: always;
    }
    .qr-container {
        border: 2px solid #333;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        background-color: #f8f9fa; /* Default background */
    }
    .qr-container.color-white { background-color: #ffffff; border-color: #ccc; }
    .qr-container.color-yellow { background-color: #fff3cd; border-color: #ffeeba; }
    .qr-container.color-red { background-color: #f8d7da; border-color: #f5c6cb; }
    .qr-container.color-white_trap { background-color: #e2e3e5; border-color: #d6d8db; }
    .qr-container.color-green { background-color: #d4edda; border-color: #c3e6cb; }

    .qr-container img {
        max-width: 100%;
        height: auto;
        margin-bottom: 10px;
    }
    .qr-container h5 {
        font-family: monospace;
        font-size: 1.1rem;
        margin: 0;
    }
    .print-button-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
    }
    @media print {
        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        .print-button-container { display: none; }
        .qr-page { border: none; padding: 0; }
    }
</style>
{% endblock %}

{% block content %}
<div class="print-button-container">
    <button onclick="window.print()" class="btn btn-primary btn-lg">Drukuj Wszystko</button>
</div>

<div class="qr-page">
    {% for qr in qrcodes %}
    <div class="qr-container color-{{ qr.color }}">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data={{ url_for('player_view', event_id=event_id, qr_code=qr.code_identifier, _external=True) }}" alt="QR Code">
        <h5>{{ qr.code_identifier }}</h5>
    </div>
    {% else %}
    <div class="alert alert-warning" style="grid-column: 1 / -1;">
        Brak kodów QR do wyświetlenia dla tego eventu. Wygeneruj je w panelu Superhosta.
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
{% endblock %}

