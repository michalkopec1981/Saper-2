{% extends 'base.html' %}
{% block title %}Gracz{% endblock %}
{% block content %}
<div class="container mt-4" style="max-width: 500px;">
    <div id="main-view">
        <div id="name-input-section" class="text-center">
            <h2>Witaj w grze Saper!</h2>
            <div class="mb-3"><label for="player-name" class="form-label">Podaj swoje imię lub nazwę drużyny:</label><input type="text" class="form-control" id="player-name" required></div>
            <button id="register-btn" class="btn btn-primary">Dołącz do Gry i Skanuj Kod</button>
        </div>
        <div id="game-view" style="display: none;">
            <div class="d-flex justify-content-between align-items-center">
                <h2>Witaj, <span id="player-name-display"></span>!</h2>
                <p class="lead mb-0">Punkty: <strong id="player-score">0</strong></p>
            </div>
            <hr>
        </div>
        <div id="quiz-section" style="display: none;" class="text-center">
             <h3>Pytanie:</h3>
             <p id="question" class="lead"></p>
             <div id="answers" class="d-grid gap-2 mt-3"></div>
        </div>
        <div id="message-section" style="display: none;" class="alert"></div>
    </div>
    <div id="photo-capture-view" style="display:none;" class="text-center">
        <h3>Wyzwanie Fotograficzne!</h3>
        <p>Zrób śmieszne zdjęcie i zdobądź 15 punktów!</p>
        <video id="camera-feed" autoplay playsinline class="w-100 border rounded mb-2"></video>
        <button id="capture-btn" class="btn btn-danger btn-lg">Zrób zdjęcie</button>
        <canvas id="photo-canvas" style="display:none;"></canvas>
    </div>
    <div id="tetris-game-view" style="display:none;">
    <div class="text-center">
        <h3>🎮 TETRIS</h3>
        <p class="lead">Zdobądź 20 punktów, aby wygrać!</p>
        <div class="mb-3"><h4>Punkty: <span id="tetris-score">0</span> / 20</h4></div>
        <canvas id="tetris-canvas" width="300" height="600" style="border: 3px solid #333; background-color: #000; display: block; margin: 0 auto; border-radius: 10px;"></canvas>
        <div class="mt-3">
            <p class="text-muted small mb-2"><strong>Sterowanie:</strong><br>← → ↓ SPACJA</p>
            <button id="tetris-start-btn" class="btn btn-primary btn-lg">Start Gry</button>
            <button id="tetris-back-btn" class="btn btn-secondary">Wróć</button>
        </div>
    </div>
</div>
</div>
{% endblock %}
{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='tetris.js') }}"></script>
<script>
// Pełny kod JavaScript dla gracza
</script>
{% endblock %}


