<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Test: {{ game_name }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>

{% if game_name == 'tetris' %}
    <!-- üéÆ WIDOK GRY TETRIS -->
    <div id="tetris-game-view" style="display:block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #607D8B; z-index: 1000;">
        <div class="d-flex flex-column" style="height: 100vh;">
            <div class="text-center py-1 bg-dark text-white" style="flex: 0 0 8%; min-height: 60px; display: flex; flex-direction: column; justify-content: center;">
                <h5 class="mb-0" style="font-size: 1.1rem;">üéÆ TETRIS - TEST</h5>
                <div class="d-flex justify-content-between align-items-center px-3">
                    <span style="font-size: 0.85rem;">Tryb testowy</span>
                    <strong style="font-size: 0.9rem;">Punkty: <span id="tetris-score">0</span></strong>
                </div>
            </div>

            <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 2px; position: relative;">
                <div id="tetris-start-section" class="text-center" style="position: absolute; z-index: 10; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <h4 class="mb-3" style="color: #333;">üéÆ Tetris - Test Hosta</h4>
                    <p class="mb-4" style="color: #666;">Kliknij START aby przetestowaƒá grƒô</p>
                    <button id="tetris-start-btn" class="btn btn-success btn-lg mb-3" style="width: 200px; font-weight: bold;">START GRY</button>
                    <br>
                    <button id="tetris-back-btn" class="btn btn-outline-secondary" onclick="window.parent.postMessage('close', '*')">‚Üê Zamknij test</button>
                </div>

                <div id="tetris-left-controls" style="display: none; position: absolute; left: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="tetris-left-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚óÑ</button>
                        <button id="tetris-rotate-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 28px; touch-action: manipulation; border: 3px solid #333; background: white;">üîÑ</button>
                    </div>
                </div>

                <canvas id="tetris-canvas" style="border: 3px solid #333; background-color: #000; border-radius: 10px; max-width: calc(100% - 140px); max-height: calc(100% - 4px); z-index: 1;"></canvas>

                <div id="tetris-right-controls" style="display: none; position: absolute; right: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="tetris-right-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñ∫</button>
                        <button id="tetris-down-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñº</button>
                    </div>
                </div>
            </div>

            <div style="flex: 0 0 8%; display: flex; align-items: center; justify-content: center; padding: 5px;">
                <button id="tetris-exit-btn" class="btn btn-danger" style="width: 90%; max-width: 300px; height: 45px; font-weight: bold; display: none;" onclick="window.parent.postMessage('close', '*')">ZAMKNIJ TEST</button>
            </div>
        </div>
    </div>

{% elif game_name == 'arkanoid' %}
    <!-- üéÆ WIDOK GRY ARKANOID -->
    <div id="arkanoid-game-view" style="display:block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #16213e; z-index: 1000;">
        <div class="d-flex flex-column" style="height: 100vh;">
            <div class="text-center py-1 bg-dark text-white" style="flex: 0 0 8%; min-height: 60px; display: flex; flex-direction: column; justify-content: center;">
                <h5 class="mb-0" style="font-size: 1.1rem;">üèì ARKANOID - TEST</h5>
                <div class="d-flex justify-content-between align-items-center px-3">
                    <span style="font-size: 0.85rem;">Tryb testowy</span>
                    <div>
                        <strong style="font-size: 0.9rem;">Punkty: <span id="arkanoid-score">0</span></strong>
                        <span style="margin-left: 15px; font-size: 1rem;" id="arkanoid-lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
                    </div>
                </div>
            </div>

            <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 2px; position: relative;">
                <div id="arkanoid-start-section" class="text-center" style="position: absolute; z-index: 10; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <h4 class="mb-3" style="color: #333;">üèì Arkanoid - Test Hosta</h4>
                    <p class="mb-4" style="color: #666;">Zbij ceg≈Çy, aby przetestowaƒá!</p>
                    <button id="arkanoid-start-btn" class="btn btn-success btn-lg mb-3" style="width: 200px; font-weight: bold;">START GRY</button>
                    <br>
                    <button id="arkanoid-back-btn" class="btn btn-outline-secondary" onclick="window.parent.postMessage('close', '*')">‚Üê Zamknij test</button>
                </div>

                <div id="arkanoid-left-controls" style="display: none; position: absolute; left: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="arkanoid-left-btn" class="btn btn-light" style="width: 65px; height: 130px; font-size: 48px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚óÑ</button>
                    </div>
                </div>

                <canvas id="arkanoid-canvas" style="border: 3px solid #333; background-color: #1a1a2e; border-radius: 10px; max-width: calc(100% - 140px); max-height: calc(100% - 4px); z-index: 1;"></canvas>

                <div id="arkanoid-right-controls" style="display: none; position: absolute; right: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="arkanoid-right-btn" class="btn btn-light" style="width: 65px; height: 130px; font-size: 48px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñ∫</button>
                    </div>
                </div>
            </div>

            <div style="flex: 0 0 8%; display: flex; align-items: center; justify-content: center; padding: 5px;">
                <button id="arkanoid-exit-btn" class="btn btn-danger" style="width: 90%; max-width: 300px; height: 45px; font-weight: bold; display: none;" onclick="window.parent.postMessage('close', '*')">ZAMKNIJ TEST</button>
            </div>
        </div>
    </div>

{% elif game_name == 'snake' %}
    <!-- üêç WIDOK GRY SNAKE -->
    <div id="snake-game-view" style="display:block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #2d4a2b; z-index: 1000;">
        <div class="d-flex flex-column" style="height: 100vh;">
            <div class="text-center py-1 bg-dark text-white" style="flex: 0 0 8%; min-height: 60px; display: flex; flex-direction: column; justify-content: center;">
                <h5 class="mb-0" style="font-size: 1.1rem;">üêç SNAKE - TEST</h5>
                <div class="d-flex justify-content-between align-items-center px-3">
                    <span style="font-size: 0.85rem;">Tryb testowy</span>
                    <strong style="font-size: 0.9rem;">Punkty: <span id="snake-score">0</span></strong>
                </div>
            </div>

            <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 2px; position: relative;">
                <div id="snake-start-section" class="text-center" style="position: absolute; z-index: 10; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <h4 class="mb-3" style="color: #333;">üêç Snake - Test Hosta</h4>
                    <p class="mb-4" style="color: #666;">Zbieraj jedzenie aby przetestowaƒá!</p>
                    <button id="snake-start-btn" class="btn btn-success btn-lg mb-3" style="width: 200px; font-weight: bold;">START GRY</button>
                    <br>
                    <button id="snake-back-btn" class="btn btn-outline-secondary" onclick="window.parent.postMessage('close', '*')">‚Üê Zamknij test</button>
                </div>

                <div id="snake-left-controls" style="display: none; position: absolute; left: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="snake-up-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñ≤</button>
                        <button id="snake-left-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚óÑ</button>
                    </div>
                </div>

                <canvas id="snake-canvas" style="border: 3px solid #333; background: #000; box-shadow: 0 0 15px rgba(0,0,0,0.5);"></canvas>

                <div id="snake-right-controls" style="display: none; position: absolute; right: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="snake-down-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñº</button>
                        <button id="snake-right-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñ∫</button>
                    </div>
                </div>
            </div>

            <div style="flex: 0 0 8%; display: flex; align-items: center; justify-content: center; padding: 5px;">
                <button id="snake-exit-btn" class="btn btn-danger" style="width: 90%; max-width: 300px; height: 45px; font-weight: bold; display: none;" onclick="window.parent.postMessage('close', '*')">ZAMKNIJ TEST</button>
            </div>
        </div>
    </div>

{% elif game_name == 'pacman' %}
    <!-- üëª WIDOK GRY PACMAN -->
    <div id="pacman-game-view" style="display:block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; z-index: 1000;">
        <div class="d-flex flex-column" style="height: 100vh;">
            <div class="text-center py-1 bg-dark text-white" style="flex: 0 0 8%; min-height: 60px; display: flex; flex-direction: column; justify-content: center;">
                <h5 class="mb-0" style="font-size: 1.1rem;">üëª PACMAN - TEST</h5>
                <div class="d-flex justify-content-between align-items-center px-3">
                    <span style="font-size: 0.85rem;">Tryb testowy</span>
                    <strong style="font-size: 0.9rem;">Punkty: <span id="pacman-score">0</span></strong>
                </div>
            </div>

            <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 2px; position: relative;">
                <div id="pacman-start-section" class="text-center" style="position: absolute; z-index: 10; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <h4 class="mb-3" style="color: #333;">üëª PacMan - Test Hosta</h4>
                    <p class="mb-4" style="color: #666;">Zjadaj kropki i unikaj duch√≥w!</p>
                    <button id="pacman-start-btn" class="btn btn-success btn-lg mb-3" style="width: 200px; font-weight: bold;">START GRY</button>
                    <br>
                    <button id="pacman-back-btn" class="btn btn-outline-secondary" onclick="window.parent.postMessage('close', '*')">‚Üê Zamknij test</button>
                </div>

                <div id="pacman-left-controls" style="display: none; position: absolute; left: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="pacman-up-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñ≤</button>
                        <button id="pacman-left-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚óÑ</button>
                    </div>
                </div>

                <canvas id="pacman-canvas" style="border: 3px solid #333; background: #000; box-shadow: 0 0 15px rgba(0,0,0,0.5);"></canvas>

                <div id="pacman-right-controls" style="display: none; position: absolute; right: 2px; top: 50%; transform: translateY(-50%); z-index: 5;">
                    <div class="d-flex flex-column gap-2">
                        <button id="pacman-down-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñº</button>
                        <button id="pacman-right-btn" class="btn btn-light" style="width: 65px; height: 65px; font-size: 32px; touch-action: manipulation; border: 3px solid #333; background: white; line-height: 1;">‚ñ∫</button>
                    </div>
                </div>
            </div>

            <div style="flex: 0 0 8%; display: flex; align-items: center; justify-content: center; padding: 5px;">
                <button id="pacman-exit-btn" class="btn btn-danger" style="width: 90%; max-width: 300px; height: 45px; font-weight: bold; display: none;" onclick="window.parent.postMessage('close', '*')">ZAMKNIJ TEST</button>
            </div>
        </div>
    </div>

{% elif game_name == 'trex' %}
    <!-- ü¶ñ WIDOK GRY T-REX -->
    <div id="trex-game-view" style="display:block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #f7f7f7; z-index: 1000;">
        <div class="d-flex flex-column" style="height: 100vh;">
            <div class="text-center py-1 bg-dark text-white" style="flex: 0 0 8%; min-height: 60px; display: flex; flex-direction: column; justify-content: center;">
                <h5 class="mb-0" style="font-size: 1.1rem;">ü¶ñ T-REX - TEST</h5>
                <div class="d-flex justify-content-between align-items-center px-3">
                    <span style="font-size: 0.85rem;">Tryb testowy</span>
                    <strong style="font-size: 0.9rem;">Punkty: <span id="trex-score">0</span></strong>
                </div>
            </div>

            <div style="flex: 1; display: flex; align-items: center; justify-content: center; padding: 2px; position: relative;">
                <div id="trex-start-section" class="text-center" style="position: absolute; z-index: 10; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                    <h4 class="mb-3" style="color: #333;">ü¶ñ T-Rex - Test Hosta</h4>
                    <p class="mb-4" style="color: #666;">Skacz nad przeszkodami!</p>
                    <button id="trex-start-btn" class="btn btn-success btn-lg mb-3" style="width: 200px; font-weight: bold;">START GRY</button>
                    <br>
                    <button id="trex-back-btn" class="btn btn-outline-secondary" onclick="window.parent.postMessage('close', '*')">‚Üê Zamknij test</button>
                </div>

                <canvas id="trex-canvas" style="border: 3px solid #333; background: #f7f7f7; border-radius: 10px; max-width: calc(100% - 20px); max-height: calc(100% - 4px); z-index: 1;"></canvas>

                <div id="trex-jump-control" style="display: none; position: absolute; bottom: 10%; right: 10%; z-index: 5;">
                    <button id="trex-jump-btn" class="btn btn-warning" style="width: 80px; height: 80px; font-size: 24px; border-radius: 50%; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">SKOK</button>
                </div>
            </div>

            <div style="flex: 0 0 8%; display: flex; align-items: center; justify-content: center; padding: 5px;">
                <button id="trex-exit-btn" class="btn btn-danger" style="width: 90%; max-width: 300px; height: 45px; font-weight: bold; display: none;" onclick="window.parent.postMessage('close', '*')">ZAMKNIJ TEST</button>
            </div>
        </div>
    </div>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename=game_name + '.js') }}"></script>
<script>
// Tryb testowy - uproszczona inicjalizacja gry bez logowania gracza
document.addEventListener('DOMContentLoaded', function() {
    console.log('Test mode for game: {{ game_name }}');

    // Inicjalizacja gry nastƒÖpi automatycznie przez za≈Çadowany skrypt *.js
    // Skrypty gier (tetris.js, arkanoid.js, etc.) automatycznie pod≈ÇƒÖczajƒÖ siƒô do element√≥w DOM
});
</script>
</body>
</html>
