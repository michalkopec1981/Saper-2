{% extends 'base.html' %}
{% block title %}Panel Gracza - {{ player_name }}{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/player_dashboard_styles.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Header -->
    <div class="dashboard-card">
        <div class="dashboard-header">
            <h1 class="player-name" id="player-name">{{ player_name }}</h1>
            <p class="game-name" id="game-name">Åadowanie...</p>
        </div>

        <!-- Timer -->
        <div class="timer-display">
            <div class="info-label" data-lang="time_remaining">Czas do koÅ„ca</div>
            <div class="timer-value" id="timer-display">--:--</div>
        </div>

        <!-- Info Grid -->
        <div class="info-grid">
            <div class="info-item">
                <div class="info-label" data-lang="active_players">Aktywni gracze</div>
                <div class="info-value" id="active-players">-</div>
            </div>
            <div class="info-item">
                <div class="info-label" data-lang="your_points">Twoje punkty</div>
                <div class="info-value highlight" id="player-points">0</div>
            </div>
            <div class="info-item">
                <div class="info-label" data-lang="points_earned">Zdobyte punkty</div>
                <div class="info-value" id="total-earned">0</div>
            </div>
            <div class="info-item">
                <div class="info-label" data-lang="points_available">MoÅ¼liwe punkty</div>
                <div class="info-value" id="points-available">-</div>
            </div>
        </div>

        <!-- Multipliers -->
        <div class="multiplier-badges">
            <div class="multiplier-badge time">
                <div class="badge-label" data-lang="time_speed">Tempo czasu</div>
                <div class="badge-value" id="time-speed">x1</div>
            </div>
            <div class="multiplier-badge points">
                <div class="badge-label" data-lang="point_bonus">Premia punktowa</div>
                <div class="badge-value" id="point-bonus">x1</div>
            </div>
        </div>

        <!-- Host Message -->
        <div class="message-box" id="message-box">
            <p class="message-text" id="message-text"></p>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn password" id="btn-password">
                <span style="font-size: 1.5rem;">ğŸ”‘</span>
                <span data-lang="btn_password">HasÅ‚o</span>
            </button>
            <button class="action-btn scan" id="btn-scan">
                <span style="font-size: 1.5rem;">ğŸ“±</span>
                <span data-lang="btn_scan">Skanuj</span>
            </button>
            <button class="action-btn selfie" id="btn-selfie">
                <span style="font-size: 1.5rem;">ğŸ¤³</span>
                <span data-lang="btn_selfie">Selfie</span>
            </button>
        </div>

        <!-- Language Selector -->
        <div class="language-selector">
            <button class="lang-btn active" data-lang="pl" title="Polski">ğŸ‡µğŸ‡±</button>
            <button class="lang-btn" data-lang="en" title="English">ğŸ‡¬ğŸ‡§</button>
            <button class="lang-btn" data-lang="de" title="Deutsch">ğŸ‡©ğŸ‡ª</button>
        </div>
    </div>
</div>

<!-- Password Modal -->
<div class="modal-overlay" id="password-modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('password-modal')">&times;</button>
        <h3 data-lang="password_title">HasÅ‚o do odkrycia</h3>
        <div class="password-display" id="password-display">_ _ _ _ _ _ _ _</div>
    </div>
</div>

<!-- QR Scanner Modal -->
<div class="modal-overlay" id="scanner-modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('scanner-modal')">&times;</button>
        <h3 data-lang="scan_title">Skanuj kod QR</h3>
        <div id="qr-reader"></div>
        <p style="text-align: center; margin-top: 15px; color: #666;">
            <span data-lang="scan_instruction">Skieruj kamerÄ™ na kod QR</span>
        </p>
    </div>
</div>

<!-- Selfie Gallery Modal -->
<div class="modal-overlay" id="selfie-modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('selfie-modal')">&times;</button>
        <h3 data-lang="selfie_title">Galeria zabawnych selfie</h3>
        <div class="selfie-gallery" id="selfie-gallery">
            <!-- Selfies will be loaded here -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.socket.io/4.5.2/socket.io.min.js"></script>
<script src="{{ url_for('static', filename='js/socket-manager.js') }}"></script>
<script src="{{ url_for('static', filename='js/player_dashboard_main.js') }}"></script>
{% endblock %}
